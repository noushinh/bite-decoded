{"ast":null,"code":"var _jsxFileName = \"/Users/noushinhaque/foodies/src/components/Map.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect } from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Map({\n  locations = [],\n  selectedLocation = null\n}) {\n  _s();\n  const mapContainer = useRef(null);\n  const mapRef = useRef(null);\n  const markersRef = useRef([]);\n  useEffect(() => {\n    const token = process.env.REACT_APP_MAPBOX_TOKEN || window.__MAPBOX_TOKEN__;\n    if (!token) {\n      // eslint-disable-next-line no-console\n      console.warn('Mapbox token missing (REACT_APP_MAPBOX_TOKEN or window.__MAPBOX_TOKEN__). Map will not initialize.');\n      return;\n    }\n    mapboxgl.accessToken = token;\n    const map = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: 'mapbox://styles/mapbox/streets-v11',\n      center: [-74.006, 40.7128],\n      zoom: 12\n    });\n    map.addControl(new mapboxgl.NavigationControl());\n    mapRef.current = map;\n\n    // Debug: log container size and token\n    // eslint-disable-next-line no-console\n    console.log('Map init: container', mapContainer.current && mapContainer.current.getBoundingClientRect());\n    // eslint-disable-next-line no-console\n    console.log('Map init: token present', !!token);\n    map.on('load', () => {\n      try {\n        const canvas = map.getCanvas();\n        if (canvas) {\n          // Give the canvas a subtle background for debugging if tiles fail to render\n          canvas.style.background = '#e9f3ff';\n          // eslint-disable-next-line no-console\n          console.log('Map loaded: canvas size', canvas.width, canvas.height);\n        }\n      } catch (e) {\n        // eslint-disable-next-line no-console\n        console.warn('Map load event error', e);\n      }\n    });\n    return () => {\n      map.remove();\n      mapRef.current = null;\n    };\n  }, []);\n\n  // Update markers whenever locations change\n  useEffect(() => {\n    const map = mapRef.current;\n    if (!map) return;\n\n    // Remove existing markers\n    markersRef.current.forEach(m => m.remove());\n    markersRef.current = [];\n    locations.forEach(loc => {\n      const marker = new mapboxgl.Marker().setLngLat(loc.coordinates).setPopup(new mapboxgl.Popup({\n        offset: 12\n      }).setHTML(`<strong>${loc.title}</strong><p>${loc.description}</p>`)).addTo(map);\n      markersRef.current.push(marker);\n    });\n  }, [locations]);\n\n  // When selectedLocation changes, fly to it and open its popup\n  useEffect(() => {\n    const map = mapRef.current;\n    if (!map || !selectedLocation) return;\n    const [lng, lat] = selectedLocation.coordinates;\n    map.flyTo({\n      center: [lng, lat],\n      zoom: 14\n    });\n\n    // Open popup for matching marker\n    const matched = markersRef.current.find(m => {\n      const lngLat = m.getLngLat();\n      return Math.abs(lngLat.lng - lng) < 1e-6 && Math.abs(lngLat.lat - lat) < 1e-6;\n    });\n    if (matched) matched.togglePopup();\n  }, [selectedLocation]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'relative',\n      height: '100%'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapContainer,\n      id: \"map\",\n      className: \"map\",\n      style: {\n        height: '100%'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), !process.env.REACT_APP_MAPBOX_TOKEN && !window.__MAPBOX_TOKEN__ && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        top: 80,\n        left: 16,\n        background: 'rgba(255,255,255,0.95)',\n        padding: 10,\n        borderRadius: 6,\n        zIndex: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Mapbox token missing\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: 13,\n          marginTop: 6\n        },\n        children: \"Provide `REACT_APP_MAPBOX_TOKEN` at build time or set `window.__MAPBOX_TOKEN__` in `public/index.html`.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n}\n_s(Map, \"0QljtO8RzWhlkrJOIuZ6SHs7slk=\");\n_c = Map;\nvar _c;\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"names":["React","useRef","useEffect","mapboxgl","jsxDEV","_jsxDEV","Map","locations","selectedLocation","_s","mapContainer","mapRef","markersRef","token","process","env","REACT_APP_MAPBOX_TOKEN","window","__MAPBOX_TOKEN__","console","warn","accessToken","map","container","current","style","center","zoom","addControl","NavigationControl","log","getBoundingClientRect","on","canvas","getCanvas","background","width","height","e","remove","forEach","m","loc","marker","Marker","setLngLat","coordinates","setPopup","Popup","offset","setHTML","title","description","addTo","push","lng","lat","flyTo","matched","find","lngLat","getLngLat","Math","abs","togglePopup","position","children","ref","id","className","fileName","_jsxFileName","lineNumber","columnNumber","top","left","padding","borderRadius","zIndex","fontSize","marginTop","_c","$RefreshReg$"],"sources":["/Users/noushinhaque/foodies/src/components/Map.js"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\nexport default function Map({ locations = [], selectedLocation = null }) {\n  const mapContainer = useRef(null);\n  const mapRef = useRef(null);\n  const markersRef = useRef([]);\n\n  useEffect(() => {\n    const token = process.env.REACT_APP_MAPBOX_TOKEN || window.__MAPBOX_TOKEN__;\n    if (!token) {\n      // eslint-disable-next-line no-console\n      console.warn('Mapbox token missing (REACT_APP_MAPBOX_TOKEN or window.__MAPBOX_TOKEN__). Map will not initialize.');\n      return;\n    }\n\n    mapboxgl.accessToken = token;\n\n    const map = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: 'mapbox://styles/mapbox/streets-v11',\n      center: [-74.006, 40.7128],\n      zoom: 12,\n    });\n\n    map.addControl(new mapboxgl.NavigationControl());\n\n    mapRef.current = map;\n\n    // Debug: log container size and token\n    // eslint-disable-next-line no-console\n    console.log('Map init: container', mapContainer.current && mapContainer.current.getBoundingClientRect());\n    // eslint-disable-next-line no-console\n    console.log('Map init: token present', !!token);\n\n    map.on('load', () => {\n      try {\n        const canvas = map.getCanvas();\n        if (canvas) {\n          // Give the canvas a subtle background for debugging if tiles fail to render\n          canvas.style.background = '#e9f3ff';\n          // eslint-disable-next-line no-console\n          console.log('Map loaded: canvas size', canvas.width, canvas.height);\n        }\n      } catch (e) {\n        // eslint-disable-next-line no-console\n        console.warn('Map load event error', e);\n      }\n    });\n\n    return () => {\n      map.remove();\n      mapRef.current = null;\n    };\n  }, []);\n\n  // Update markers whenever locations change\n  useEffect(() => {\n    const map = mapRef.current;\n    if (!map) return;\n\n    // Remove existing markers\n    markersRef.current.forEach((m) => m.remove());\n    markersRef.current = [];\n\n    locations.forEach((loc) => {\n      const marker = new mapboxgl.Marker()\n        .setLngLat(loc.coordinates)\n        .setPopup(new mapboxgl.Popup({ offset: 12 }).setHTML(`<strong>${loc.title}</strong><p>${loc.description}</p>`))\n        .addTo(map);\n\n      markersRef.current.push(marker);\n    });\n  }, [locations]);\n\n  // When selectedLocation changes, fly to it and open its popup\n  useEffect(() => {\n    const map = mapRef.current;\n    if (!map || !selectedLocation) return;\n\n    const [lng, lat] = selectedLocation.coordinates;\n    map.flyTo({ center: [lng, lat], zoom: 14 });\n\n    // Open popup for matching marker\n    const matched = markersRef.current.find((m) => {\n      const lngLat = m.getLngLat();\n      return Math.abs(lngLat.lng - lng) < 1e-6 && Math.abs(lngLat.lat - lat) < 1e-6;\n    });\n    if (matched) matched.togglePopup();\n  }, [selectedLocation]);\n\n  return (\n    <div style={{ position: 'relative', height: '100%' }}>\n      <div ref={mapContainer} id=\"map\" className=\"map\" style={{ height: '100%' }} />\n      {/* If token missing, show a non-blocking overlay message */}\n      {!process.env.REACT_APP_MAPBOX_TOKEN && !window.__MAPBOX_TOKEN__ && (\n        <div style={{ position: 'absolute', top: 80, left: 16, background: 'rgba(255,255,255,0.95)', padding: 10, borderRadius: 6, zIndex: 2 }}>\n          <strong>Mapbox token missing</strong>\n          <div style={{ fontSize: 13, marginTop: 6 }}>\n            Provide `REACT_APP_MAPBOX_TOKEN` at build time or set `window.__MAPBOX_TOKEN__` in `public/index.html`.\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}