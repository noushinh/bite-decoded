{"ast":null,"code":"var _jsxFileName = \"/Users/noushinhaque/foodies/src/components/Map.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// (No dynamic loaders needed — Leaflet is imported from npm)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Map({\n  locations = [],\n  selectedLocation = null\n}) {\n  _s();\n  const mapContainer = useRef(null);\n  const mapRef = useRef(null);\n  useEffect(() => {\n    let cancelled = false;\n    let tries = 0;\n    const initLeaflet = () => {\n      if (cancelled) return;\n      const container = mapContainer.current;\n      if (!container) {\n        if (tries++ < 20) return setTimeout(initLeaflet, 100);\n        // eslint-disable-next-line no-console\n        console.warn('Leaflet: map container not found after retries');\n        return;\n      }\n      const {\n        clientWidth,\n        clientHeight\n      } = container;\n      if (!clientWidth || !clientHeight) {\n        if (tries++ < 20) return setTimeout(initLeaflet, 100);\n        // eslint-disable-next-line no-console\n        console.warn('Leaflet: map container has zero size after retries', clientWidth, clientHeight);\n        // we'll proceed anyway\n      }\n      try {\n        const map = L.map(container, {\n          scrollWheelZoom: true\n        }).setView([20, 0], 2);\n        // Use CartoDB Positron (light) tiles for a clean, soft basemap\n        L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {\n          maxZoom: 19,\n          subdomains: 'abcd',\n          attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>'\n        }).addTo(map);\n        mapRef.current = map;\n        try {\n          L.control.scale({\n            position: 'bottomleft',\n            imperial: false\n          }).addTo(map);\n        } catch (e) {}\n\n        // Add country-fill GeoJSON overlay to highlight specific countries.\n        // We fetch a public world countries GeoJSON and style matching features.\n        let geoJsonLayer = null;\n        const geoJsonUrl = 'https://raw.githubusercontent.com/johan/world.geo.json/master/countries.geo.json';\n        const highlightNames = new Set(['usa', 'united states', 'united states of america', 'india', 'mexico', 'uk', 'united kingdom', 'south africa']);\n        fetch(geoJsonUrl).then(res => res.json()).then(geo => {\n          try {\n            geoJsonLayer = L.geoJSON(geo, {\n              style: feature => {\n                const name = feature.properties && (feature.properties.ADMIN || feature.properties.NAME || feature.properties.name) || '';\n                const n = String(name).toLowerCase().trim();\n                const isHighlighted = highlightNames.has(n);\n                return {\n                  color: isHighlighted ? '#b30000' : '#666',\n                  weight: isHighlighted ? 1.2 : 0.6,\n                  fillColor: isHighlighted ? '#d9534f' : '#000000',\n                  fillOpacity: isHighlighted ? 0.28 : 0,\n                  interactive: false\n                };\n              }\n            }).addTo(map);\n\n            // Place polygons behind markers but above tiles\n            try {\n              geoJsonLayer.bringToBack && geoJsonLayer.bringToBack();\n            } catch (e) {}\n          } catch (e) {\n            // ignore geojson errors\n          }\n        }).catch(() => {\n          // ignore fetch errors (offline or CORS) - app still works without country fills\n        });\n        const ensureSize = () => {\n          try {\n            map.invalidateSize && map.invalidateSize();\n          } catch (e) {}\n        };\n        ensureSize();\n        const _t1 = setTimeout(ensureSize, 100);\n        const _t2 = setTimeout(ensureSize, 500);\n        const _t3 = setTimeout(ensureSize, 1000);\n        const _t4 = setTimeout(ensureSize, 2000);\n        const _t5 = setTimeout(ensureSize, 4000);\n        const onResize = () => ensureSize();\n        window.addEventListener('resize', onResize);\n\n        // eslint-disable-next-line no-console\n        console.log('Leaflet initialized', {\n          clientWidth,\n          clientHeight\n        });\n        try {\n          if (typeof window !== 'undefined') window.__LEAFLET_MAP__ = map;\n        } catch (e) {}\n        return () => {\n          try {\n            window.removeEventListener('resize', onResize);\n          } catch (e) {}\n          clearTimeout(_t1);\n          clearTimeout(_t2);\n          clearTimeout(_t3);\n          clearTimeout(_t4);\n          clearTimeout(_t5);\n          try {\n            if (geoJsonLayer) map.removeLayer(geoJsonLayer);\n          } catch (e) {}\n          try {\n            map.remove();\n          } catch (e) {}\n          mapRef.current = null;\n        };\n      } catch (e) {\n        // eslint-disable-next-line no-console\n        console.warn('Leaflet init failed:', e);\n      }\n    };\n    initLeaflet();\n    return () => {\n      cancelled = true;\n    };\n  }, []);\n\n  // Note: markers and popups intentionally removed per user request.\n  // The map will render tiles and the country-fill overlay only.\n\n  return (\n    /*#__PURE__*/\n    // Render the map container as the direct child so flex sizing rules apply\n    _jsxDEV(\"div\", {\n      ref: mapContainer,\n      id: \"map\",\n      className: \"map\",\n      style: {\n        flex: 1,\n        height: '100%',\n        minHeight: 320\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 5\n    }, this)\n  );\n}\n_s(Map, \"trBYWQnBQabdsyB7ysINFei525A=\");\n_c = Map;\nvar _c;\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"names":["React","useRef","useEffect","L","jsxDEV","_jsxDEV","Map","locations","selectedLocation","_s","mapContainer","mapRef","cancelled","tries","initLeaflet","container","current","setTimeout","console","warn","clientWidth","clientHeight","map","scrollWheelZoom","setView","tileLayer","maxZoom","subdomains","attribution","addTo","control","scale","position","imperial","e","geoJsonLayer","geoJsonUrl","highlightNames","Set","fetch","then","res","json","geo","geoJSON","style","feature","name","properties","ADMIN","NAME","n","String","toLowerCase","trim","isHighlighted","has","color","weight","fillColor","fillOpacity","interactive","bringToBack","catch","ensureSize","invalidateSize","_t1","_t2","_t3","_t4","_t5","onResize","window","addEventListener","log","__LEAFLET_MAP__","removeEventListener","clearTimeout","removeLayer","remove","ref","id","className","flex","height","minHeight","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/noushinhaque/foodies/src/components/Map.js"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// (No dynamic loaders needed — Leaflet is imported from npm)\n\nexport default function Map({ locations = [], selectedLocation = null }) {\n  const mapContainer = useRef(null);\n  const mapRef = useRef(null);\n\n    useEffect(() => {\n      let cancelled = false;\n      let tries = 0;\n\n      const initLeaflet = () => {\n        if (cancelled) return;\n        const container = mapContainer.current;\n        if (!container) {\n          if (tries++ < 20) return setTimeout(initLeaflet, 100);\n          // eslint-disable-next-line no-console\n          console.warn('Leaflet: map container not found after retries');\n          return;\n        }\n\n        const { clientWidth, clientHeight } = container;\n        if (!clientWidth || !clientHeight) {\n          if (tries++ < 20) return setTimeout(initLeaflet, 100);\n          // eslint-disable-next-line no-console\n          console.warn('Leaflet: map container has zero size after retries', clientWidth, clientHeight);\n          // we'll proceed anyway\n        }\n\n        try {\n          const map = L.map(container, { scrollWheelZoom: true }).setView([20, 0], 2);\n          // Use CartoDB Positron (light) tiles for a clean, soft basemap\n          L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {\n            maxZoom: 19,\n            subdomains: 'abcd',\n            attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n          }).addTo(map);\n\n          mapRef.current = map;\n\n          try { L.control.scale({ position: 'bottomleft', imperial: false }).addTo(map); } catch (e) {}\n\n            // Add country-fill GeoJSON overlay to highlight specific countries.\n            // We fetch a public world countries GeoJSON and style matching features.\n            let geoJsonLayer = null;\n            const geoJsonUrl = 'https://raw.githubusercontent.com/johan/world.geo.json/master/countries.geo.json';\n            const highlightNames = new Set([\n              'usa', 'united states', 'united states of america',\n              'india',\n              'mexico',\n              'uk', 'united kingdom',\n              'south africa'\n            ]);\n\n            fetch(geoJsonUrl)\n              .then((res) => res.json())\n              .then((geo) => {\n                try {\n                  geoJsonLayer = L.geoJSON(geo, {\n                    style: (feature) => {\n                      const name = (feature.properties && (feature.properties.ADMIN || feature.properties.NAME || feature.properties.name)) || '';\n                      const n = String(name).toLowerCase().trim();\n                      const isHighlighted = highlightNames.has(n);\n                      return {\n                        color: isHighlighted ? '#b30000' : '#666',\n                        weight: isHighlighted ? 1.2 : 0.6,\n                        fillColor: isHighlighted ? '#d9534f' : '#000000',\n                        fillOpacity: isHighlighted ? 0.28 : 0,\n                        interactive: false,\n                      };\n                    },\n                  }).addTo(map);\n\n                  // Place polygons behind markers but above tiles\n                  try { geoJsonLayer.bringToBack && geoJsonLayer.bringToBack(); } catch (e) {}\n                } catch (e) {\n                  // ignore geojson errors\n                }\n              })\n              .catch(() => {\n                // ignore fetch errors (offline or CORS) - app still works without country fills\n              });\n\n          const ensureSize = () => { try { map.invalidateSize && map.invalidateSize(); } catch (e) {} };\n          ensureSize();\n          const _t1 = setTimeout(ensureSize, 100);\n          const _t2 = setTimeout(ensureSize, 500);\n          const _t3 = setTimeout(ensureSize, 1000);\n          const _t4 = setTimeout(ensureSize, 2000);\n          const _t5 = setTimeout(ensureSize, 4000);\n          const onResize = () => ensureSize();\n          window.addEventListener('resize', onResize);\n\n          // eslint-disable-next-line no-console\n          console.log('Leaflet initialized', { clientWidth, clientHeight });\n          try { if (typeof window !== 'undefined') window.__LEAFLET_MAP__ = map; } catch(e){}\n\n          return () => {\n            try { window.removeEventListener('resize', onResize); } catch (e) {}\n            clearTimeout(_t1); clearTimeout(_t2); clearTimeout(_t3); clearTimeout(_t4); clearTimeout(_t5);\n            try { if (geoJsonLayer) map.removeLayer(geoJsonLayer); } catch (e) {}\n            try { map.remove(); } catch (e) {}\n            mapRef.current = null;\n          };\n        } catch (e) {\n          // eslint-disable-next-line no-console\n          console.warn('Leaflet init failed:', e);\n        }\n      };\n\n      initLeaflet();\n\n      return () => { cancelled = true; };\n    }, []);\n\n  // Note: markers and popups intentionally removed per user request.\n  // The map will render tiles and the country-fill overlay only.\n\n  return (\n    // Render the map container as the direct child so flex sizing rules apply\n    <div\n      ref={mapContainer}\n      id=\"map\"\n      className=\"map\"\n      style={{ flex: 1, height: '100%', minHeight: 320 }}\n    />\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}